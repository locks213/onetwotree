<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - L'Atelier</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://widget.mondialrelay.com/parcelshop-picker/jquery.mondialrelay.parcelshoppicker.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <style>
        /* Style sp√©cifique pour le formulaire de contact */
        .contact-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            text-align: left;
            margin-top: 20px;
            justify-content: center;
        }

        .contact-info, .contact-form {
            flex: 1;
            min-width: 300px;
            background: rgba(255,255,255,0.6);
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #8b7355;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
        }

        /* Champs du formulaire */
        .form-group { margin-bottom: 15px; }
        
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc; /* Bordure simple */
            border-radius: 4px;
            font-family: sans-serif; /* Plus lisible que Papyrus pour taper */
        }

        textarea { resize: vertical; height: 120px; }

        /* Icones simul√©es avec des emoji pour faire simple */
        .info-item { margin-bottom: 15px; font-size: 1.1em; }
    </style>
</head>
<body>

    <header class="main-header">
        <img src="img/header.jpg" alt="Atelier vue d'ensemble" class="header-img">
    </header>

    <nav class="main-nav">
        <ul>
            <li><a href="index.html">Accueil</a></li>
            <li class="dropdown">
                <a href="#">√Ä Propos</a>
                <div class="dropdown-content">
                    <a href="apropos.html">L'Artisan</a>
                    <a href="contact.html">Nous contacter</a>
                </div>
            </li>
            <li class="dropdown">
                <a href="#" id="auth-link">Mon Espace</a>
                <div class="dropdown-content">
                    <a href="index.html">Retour boutique pour connexion</a>
                </div>
            </li>
        </ul>
    </nav>

    <main class="showcase">
        <h1>Contactez l'Atelier</h1>
        <p>Une demande particuli√®re ? Une personnalisation ? √âcrivez-nous.</p>

        <div class="contact-wrapper">
            
            <div class="contact-info">
                <h3>Nos Coordonn√©es</h3>
                <div class="info-item">üìç <strong>Adresse :</strong><br>One Two Tree Entreprise Individuelle<br>
                2 Rue de l'√©glise<br>25150 Autechaux Roide, France</div>
                <div class="info-item">üìß <strong>Email :</strong><br>contact@onetwotree.fr</div>
                <div class="info-item">üìû <strong>T√©l√©phone :</strong><br>07 83 03 93 02</div>
                <hr style="border-color:#8b7355; margin: 20px 0;">
                
            </div>

            <div class="contact-form">
                <form onsubmit="envoyerMessage(event)">
                    <div class="form-group">
                        <label>Votre Nom</label>
                        <input type="text" id="msg-nom" required placeholder="Ex: Jean Dupont">
                    </div>
                    
                    <div class="form-group">
                        <label>Votre Email</label>
                        <input type="email" id="msg-email" required placeholder="email@exemple.com">
                    </div>

                    <div class="form-group">
                        <label>Sujet</label>
                        <input type="text" id="msg-objet" placeholder="Ex: Commande sur mesure">
                    </div>

                    <div class="form-group">
                        <label>Message</label>
                        <textarea id="msg-contenu" required placeholder="Bonjour, je voudrais savoir..."></textarea>
                    </div>

                    <button type="submit" class="btn-primary">Envoyer le message</button>
                    <p id="feedback-msg" style="margin-top:10px; font-weight:bold;"></p>
                </form>
            </div>

        </div>
    </main>

    <script src="script.js"></script> <script>
        async function envoyerMessage(event) {
            event.preventDefault(); // Emp√™che la page de se recharger
            
            const btn = event.target.querySelector('button');
            const feedback = document.getElementById('feedback-msg');
            
            // R√©cup√©ration des valeurs
            const nom = document.getElementById('msg-nom').value;
            const email = document.getElementById('msg-email').value;
            const objet = document.getElementById('msg-objet').value;
            const contenu = document.getElementById('msg-contenu').value;

            btn.disabled = true;
            btn.innerText = "Envoi en cours...";

            // Envoi vers Supabase
            const { error } = await supabaseClient.from('messages').insert({
                nom: nom,
                email: email,
                objet: objet,
                contenu: contenu
            });

            if (error) {
                console.error(error);
                feedback.style.color = "red";
                feedback.innerText = "Erreur : " + error.message;
                btn.disabled = false;
                btn.innerText = "Envoyer le message";
            } else {
                feedback.style.color = "green";
                feedback.innerText = "Message envoy√© avec succ√®s ! Je vous r√©pondrai vite.";
                // On vide le formulaire
                event.target.reset();
                btn.innerText = "Envoy√© !";
                setTimeout(() => { 
                    btn.disabled = false; 
                    btn.innerText = "Envoyer le message"; 
                    feedback.innerText = "";
                }, 3000);
            }
        }
    </script>
<footer class="main-footer">
    <div class="footer-content">
        <p>&copy; 2026 Atelier OneTwoTree - Cr√©ations artisanales</p>
        <ul class="footer-links">
            <li><a href="mentions.html">Mentions L√©gales & CGV</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><span style="font-size:0.8em; opacity:0.7;">H√©berg√© par Github</span></li>
        </ul>
    </div>
</footer>
</body>
</html>